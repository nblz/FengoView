class Slider{constructor({pagWrap:t=!1,activeClass:e="active",slides:i,chevronWrapper:s=!1,sliderApp:r,autoScroll:n=!1,scrollInterval:l=2e3,isInfinity:a=!1,slideToView:h=1,slideGap:d=0}){this.slideToView=+h,this.activeClass=e,this.pagWrap=t,t&&(this.pagItems=[...t.children]),this.chevronWrapper=s,s&&(this.prevArrow=s.children[0],this.nextArrow=s.children[1]),this.sliderApp=r,this.track=r.querySelector(".slider__track"),this.slideWrappers=[...this.track.children],this.current=1,this.slideWidth=i[0].clientWidth,this.isAnimation=!1,this.autoScroll=n,this.isInfinity=a,this.currentSlide="",this.slideGap=d,this.init(l)}init=(t=2e3)=>{if(this.slideWrappers.forEach(((t,e)=>{0===e||e===this.slideWrappers.length-1?t.dataset.current=-1:t.dataset.current=e})),this.setWrapperClass(),this.pagWrap&&this.pagItems.forEach((t=>{t.addEventListener("mouseover",this.paginationHover),t.addEventListener("click",this.slidingByPagi)})),this.chevronWrapper&&(this.prevArrow.addEventListener("click",this.slideToPrev),this.nextArrow.addEventListener("click",this.slideToNext)),this.autoScroll){let e=setInterval((()=>{this.isAnimation||this.slideToNext()}),t);this.sliderApp.addEventListener("mouseenter",(()=>{clearInterval(e)})),this.sliderApp.addEventListener("mouseleave",(()=>{e=setInterval((()=>{this.isAnimation||this.slideToNext()}),t)})),document.addEventListener("visibilitychange",(()=>{document.hidden?clearInterval(e):e=setInterval((()=>{this.isAnimation||this.slideToNext()}),t)})),window.addEventListener("resize",(()=>{clearInterval(e),this.slideWidth=this.slideWrappers[1].children[0].clientWidth}))}};slideToPrev=()=>{if(!this.isAnimation){const{nextSlide:t,next:e}=this.getNextSlide("prev");this.setWrapperClass(),this.slidingSmooth(t,"prev"),this.pagWrap&&this.updatePagi(e-1)}};slideToNext=()=>{if((this.track.getBoundingClientRect().right>this.slideWidth+1&&!this.isAnimation||this.isInfinity)&&!this.isAnimation){const{nextSlide:t,next:e}=this.getNextSlide("next");this.setWrapperClass(),this.slidingSmooth(t,"next"),this.pagWrap&&this.updatePagi(e-1)}};getNextSlide=t=>{let e=this.slideWrappers.find((t=>+t.dataset.current===this.current));const i=t=>{this.slideWrappers[1].innerHTML="",this.slideWrappers[1].dataset.current=-1,this.track.appendChild(this.slideWrappers[0].cloneNode(!0)),this.slideWrappers=[...this.track.children],this.slideWrappers[0].remove(),this.slideWrappers=[...this.track.children],this.moveTrack(t),this.currentSlide=e.nextElementSibling.children[0]};switch(t){case"next":let t=e.nextElementSibling;this.slideToView>1?e&&t&&void 0!==t.nextElementSibling&&(t.nextElementSibling.children[0]?this.currentSlide=t.children[0]:(t.nextElementSibling.outerHTML=this.slideWrappers[1].outerHTML,i("next")),this.current=+e.nextElementSibling.dataset.current):e&&void 0!==t&&(t.children[0]?this.currentSlide=t.children[0]:(t.outerHTML=this.slideWrappers[1].outerHTML,i("next")),this.current=+e.nextElementSibling.dataset.current);break;case"prev":const s=e.previousElementSibling,r=this.slideWrappers[this.slideWrappers.length-2],n=this.slideWrappers[this.slideWrappers.length-1];e&&void 0!==s&&(s.children[0]?(this.currentSlide=s.children[0],this.current=+s.dataset.current):(s.outerHTML=r.outerHTML,r.innerHTML="",r.dataset.current=-1,this.track.prepend(n.cloneNode(!0)),this.slideWrappers=[...this.track.children],n.remove(),this.slideWrappers=[...this.track.children],this.slideToView,this.moveTrack("prev"),this.currentSlide=this.slideWrappers[1].children[0],this.current=+this.slideWrappers[1].dataset.current));break;default:console.log(new DOMException("Unknown direction!"))}return{nextSlide:this.currentSlide,next:this.current}};updatePagi=t=>{this.pagItems.forEach(((e,i)=>{i!==t?e.classList.remove(this.activeClass):e.classList.add(this.activeClass)}))};setWrapperClass=()=>{this.slideWrappers.forEach(((t,e)=>{0===e||e===this.slideWrappers.length-1?(t.classList="flex blank",t.style=""):(""!==this.slideGap&&(t.style.marginRight=this.slideGap+"px"),this.slideToView>1?(t.classList="flex",""!==this.slideGap?t.style.minWidth=`calc(${100/this.slideToView}% - ${this.slideGap}px)`:t.style.minWidth=100/this.slideToView+"%"):t.classList="flex min-w-100")})),this.slideWidth=this.slideWrappers[1].children[0].clientWidth};moveTrack=t=>{let e=Math.round(+this.track.style.left.slice(0,-2));"next"===t?e+=this.slideWidth+this.slideGap:"prev"===t&&(e-=this.slideWidth+this.slideGap),this.track.style.left=e+"px"};slidingByPagi=t=>{if(!this.isAnimation){const e=+t.target.dataset.id+1;let i=this.slideWrappers.find((t=>+t.dataset.current===e)),s=this.slideWrappers.find((t=>+t.dataset.current===this.current)),r=this.slideWrappers.indexOf(s),n=this.slideWrappers.indexOf(i),l="";n>r?l="next":n<r&&(l="prev"),this.current=e,this.currentSlide=i.children[0],this.setWrapperClass(),this.slidingSmooth(this.currentSlide,l,2),this.updatePagi(e-1)}};slidingSmooth=(t,e,i=1)=>{const s=[t,e,i],r=t.getBoundingClientRect().left,n=this.sliderApp.getBoundingClientRect().x,l=28/i;let a,h=this.slideWidth/l,d=+this.track.style.left.slice(0,-2);switch(e){case"next":r!==n?(this.isAnimation=!0,r<n+h&&0!==r&&(h=r-n),d-=h,this.track.style.left=d+"px",a=setTimeout((()=>this.slidingSmooth(...s)),20)):(clearTimeout(a),this.isAnimation=!1);break;case"prev":r!==n?(this.isAnimation=!0,r>n-h&&0!==r&&(h=n-r),d+=h,this.track.style.left=d+"px",a=setTimeout((()=>this.slidingSmooth(...s)),20)):(clearTimeout(a),this.isAnimation=!1);break;default:console.log(new DOMException("Unknown direction!"))}};paginationHover=t=>{if(t.target.classList.contains(this.activeClass))return!1;{t.target.classList.add(this.activeClass);const e=t=>{+t.target.dataset.id!=this.current-1&&t.target.classList.remove(this.activeClass),t.target.removeEventListener("mouseout",e)};t.target.addEventListener("mouseout",e)}}}